output:
  - meta
  - execution_info
  - execution_out
  - summary

pre-push:
  parallel: true
  commands:
    announce:
      run: echo "ðŸš€ Ð¢ÐµÑÑ‚Ñ‹ ÑÑ‚Ð°Ñ€Ñ‚ÑƒÑŽÑ‚ Ð² Ñ„Ð¾Ð½Ðµ; Ð»Ð¾Ð³ â€” .shadow/test-run.log"
      
    run-example:
      # glob: "example/**/*.cs"
      run: >
        bash -c '
          mkdir -p .shadow
          LOG=".shadow/test-run.log"
          echo "ðŸš€ $(date +"%F %T") start" > "$LOG"
          # ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ñ€ÐµÐ´Ð¸Ñ€ÐµÐºÑ‚; &  disown -- Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð¾Ñ‚Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ
          ( exec nohup ./.shadow/run-send-tests.sh "$CONFIG_PATH" >> "$LOG" 2>&1 & disown )
        '
      env:
        CONFIG_PATH: ".shadow/example.configuration.json"

    run-shadow-agent:
      env: { CONFIG_PATH: ".shadow/shadow-agent.configuration.json" }
      glob: "shadow-agent/**/*.cs"
      run: ./.shadow/run-send-tests.sh "$CONFIG_PATH"
