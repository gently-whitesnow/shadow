output:
  - meta
  - execution_info
  - execution_out
  - summary

projects:
  commands:
    run-example:
      env:
        CONFIG_PATH: ".shadow/example.configuration.json"
      run: ./.shadow/run-send-tests.sh "$CONFIG_PATH"
    run-shadow-agent:
      env:
        CONFIG_PATH: ".shadow/shadow-agent.configuration.json"
      run: ./.shadow/run-send-tests.sh "$CONFIG_PATH"

pre-push:
  parallel: true
  commands:
    announce:
      run: echo "🚀 Запускаю интеграционные тесты в фоне…"
    background-tests:
      run: >
        bash -c '
          LOG=".shadow/test-run.log";
          echo "🚀 $(date +"%Y-%m-%d %H:%M:%S") Запуск интеграционных тестов" > "$LOG";
          nohup lefthook run projects >> "$LOG" 2>&1 &
        '